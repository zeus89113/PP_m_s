<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>{% block title %}Power Plant Management{% endblock %}</title>
    <link rel="stylesheet" href="{{ url_for('static', filename='styles.css') }}">
    {% block head %}{% endblock %}
</head>
<body>
<nav>
    <a href="{{ url_for('dashboard.nuclear_dashboard') }}" class="nav-title">Nuclear Plant Dashboard</a>

    {% if is_authenticated %}
        <a href="{{ url_for('dashboard.reports') }}">Reports</a>
        
        {% if current_user.role == 'admin' %}
             <a href="{{ url_for('auth.manage_users') }}">Manage Users</a>
        {% endif %}

        {% if current_user.role in ['admin', 'safety'] %}
            <a href="{{ url_for('dashboard.schedule_maintenance') }}">Schedule Maintenance</a>
        {% endif %}

    <a href="{{ url_for('dashboard.notifications') }}" class="notification-icon" title="Notifications">
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" width="24" height="24">
            <path d="M12 22c1.1 0 2-.9 2-2h-4c0 1.1.9 2 2 2zm6-6v-5c0-3.07-1.63-5.64-4.5-6.32V4c0-.83-.67-1.5-1.5-1.5s-1.5.67-1.5 1.5v.68C7.64 5.36 6 7.92 6 11v5l-2 2v1h16v-1l-2-2z"/>
        </svg>
        {% if unread_notification_count > 0 %}
            <span class="notification-badge">{{ unread_notification_count }}</span>
        {% endif %}
    </a>
        <a href="{{ url_for('auth.logout') }}" style="margin-left:auto;">Logout ({{ current_user.username }})</a>

    {% else %}
        <a href="{{ url_for('auth.login') }}" style="margin-left:auto;">Login</a>
    {% endif %}
</nav>

    <main>
        {% block content %}{% endblock %}
    </main>
     {% block scripts %}{% endblock %} {# Add this line before the closing </body> tag #}
</body>
</html>